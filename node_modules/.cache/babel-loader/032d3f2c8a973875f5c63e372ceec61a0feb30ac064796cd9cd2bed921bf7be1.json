{"ast":null,"code":"import _objectSpread from \"/root/reactjs-gostack4-module4/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport Sound from 'react-sound';\nexport var Types = {\n  LOAD: 'player/LOAD',\n  PLAY: 'player/PLAY',\n  PAUSE: 'player/PAUSE',\n  NEXT: 'player/NEXT',\n  PREV: 'player/PREV',\n  PLAYING: 'player/PLAYING',\n  HANDLE_POSITION: 'player/HANDLE_POSITION',\n  SET_POSITION: 'player/SET_POSITION',\n  SET_VOLUME: 'player/SET_VOLUME'\n};\nvar INITIAL_STATE = {\n  currentSong: null,\n  list: [],\n  status: Sound.status.PLAYING,\n  position: null,\n  positionShown: null,\n  duration: null,\n  volume: 100\n};\nexport default function player() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case Types.LOAD:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        currentSong: action.payload.song,\n        list: action.payload.list,\n        status: Sound.status.PLAYING,\n        position: 0,\n        duration: 0\n      });\n    case Types.PLAY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        status: Sound.status.PLAYING\n      });\n    case Types.PAUSE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        status: Sound.status.PAUSED\n      });\n    case Types.PREV:\n      {\n        var currentIndex = state.list.findIndex(function (song) {\n          return song.id === state.currentSong.id;\n        });\n        var prev = state.list[currentIndex - 1];\n        if (prev) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            currentSong: prev,\n            status: Sound.status.PLAYING,\n            position: 0\n          });\n        }\n        return state;\n      }\n    case Types.NEXT:\n      {\n        var _currentIndex = state.list.findIndex(function (song) {\n          return song.id === state.currentSong.id;\n        });\n        var next = state.list[_currentIndex + 1];\n        if (next) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            currentSong: next,\n            status: Sound.status.PLAYING,\n            position: 0\n          });\n        }\n        return state;\n      }\n    case Types.PLAYING:\n      return _objectSpread(_objectSpread({}, state), action.payload);\n    case Types.HANDLE_POSITION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        positionShown: state.duration * action.payload.percent\n      });\n    case Types.SET_POSITION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        position: state.duration * action.payload.percent,\n        positionShown: null\n      });\n    case Types.SET_VOLUME:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        volume: action.payload.volume\n      });\n    default:\n      return state;\n  }\n}\nexport var Creators = {\n  loadSong: function loadSong(song, list) {\n    return {\n      type: Types.LOAD,\n      payload: {\n        song: song,\n        list: list\n      }\n    };\n  },\n  play: function play() {\n    return {\n      type: Types.PLAY\n    };\n  },\n  pause: function pause() {\n    return {\n      type: Types.PAUSE\n    };\n  },\n  next: function next() {\n    return {\n      type: Types.NEXT\n    };\n  },\n  prev: function prev() {\n    return {\n      type: Types.PREV\n    };\n  },\n  playing: function playing(_ref) {\n    var position = _ref.position,\n      duration = _ref.duration;\n    return {\n      type: Types.PLAYING,\n      payload: {\n        position: position,\n        duration: duration\n      }\n    };\n  },\n  handlePosition: function handlePosition(percent) {\n    return {\n      type: Types.HANDLE_POSITION,\n      payload: {\n        percent: percent\n      }\n    };\n  },\n  setPosition: function setPosition(percent) {\n    return {\n      type: Types.SET_POSITION,\n      payload: {\n        percent: percent\n      }\n    };\n  },\n  setVolume: function setVolume(volume) {\n    return {\n      type: Types.SET_VOLUME,\n      payload: {\n        volume: volume\n      }\n    };\n  }\n};","map":{"version":3,"names":["Sound","Types","LOAD","PLAY","PAUSE","NEXT","PREV","PLAYING","HANDLE_POSITION","SET_POSITION","SET_VOLUME","INITIAL_STATE","currentSong","list","status","position","positionShown","duration","volume","player","state","arguments","length","undefined","action","type","_objectSpread","payload","song","PAUSED","currentIndex","findIndex","id","prev","next","percent","Creators","loadSong","play","pause","playing","_ref","handlePosition","setPosition","setVolume"],"sources":["/root/reactjs-gostack4-module4/src/store/ducks/player.js"],"sourcesContent":["import Sound from 'react-sound';\n\nexport const Types = {\n  LOAD: 'player/LOAD',\n  PLAY: 'player/PLAY',\n  PAUSE: 'player/PAUSE',\n  NEXT: 'player/NEXT',\n  PREV: 'player/PREV',\n  PLAYING: 'player/PLAYING',\n  HANDLE_POSITION: 'player/HANDLE_POSITION',\n  SET_POSITION: 'player/SET_POSITION',\n  SET_VOLUME: 'player/SET_VOLUME',\n};\n\nconst INITIAL_STATE = {\n  currentSong: null,\n  list: [],\n  status: Sound.status.PLAYING,\n  position: null,\n  positionShown: null,\n  duration: null,\n  volume: 100,\n};\n\nexport default function player(state = INITIAL_STATE, action) {\n  switch (action.type) {\n    case Types.LOAD:\n      return {\n        ...state,\n        currentSong: action.payload.song,\n        list: action.payload.list,\n        status: Sound.status.PLAYING,\n        position: 0,\n        duration: 0,\n      };\n    case Types.PLAY:\n      return { ...state, status: Sound.status.PLAYING };\n    case Types.PAUSE:\n      return { ...state, status: Sound.status.PAUSED };\n    case Types.PREV: {\n      const currentIndex = state.list.findIndex(song => song.id === state.currentSong.id);\n      const prev = state.list[currentIndex - 1];\n\n      if (prev) {\n        return {\n          ...state,\n          currentSong: prev,\n          status: Sound.status.PLAYING,\n          position: 0,\n        };\n      }\n\n      return state;\n    }\n    case Types.NEXT: {\n      const currentIndex = state.list.findIndex(song => song.id === state.currentSong.id);\n      const next = state.list[currentIndex + 1];\n\n      if (next) {\n        return {\n          ...state,\n          currentSong: next,\n          status: Sound.status.PLAYING,\n          position: 0,\n        };\n      }\n\n      return state;\n    }\n    case Types.PLAYING:\n      return { ...state, ...action.payload };\n    case Types.HANDLE_POSITION:\n      return { ...state, positionShown: state.duration * action.payload.percent };\n    case Types.SET_POSITION:\n      return { ...state, position: state.duration * action.payload.percent, positionShown: null };\n    case Types.SET_VOLUME:\n      return { ...state, volume: action.payload.volume };\n    default:\n      return state;\n  }\n}\n\nexport const Creators = {\n  loadSong: (song, list) => ({\n    type: Types.LOAD,\n    payload: { song, list },\n  }),\n\n  play: () => ({ type: Types.PLAY }),\n\n  pause: () => ({ type: Types.PAUSE }),\n\n  next: () => ({ type: Types.NEXT }),\n\n  prev: () => ({ type: Types.PREV }),\n\n  playing: ({ position, duration }) => ({\n    type: Types.PLAYING,\n    payload: { position, duration },\n  }),\n\n  handlePosition: percent => ({\n    type: Types.HANDLE_POSITION,\n    payload: { percent },\n  }),\n\n  setPosition: percent => ({\n    type: Types.SET_POSITION,\n    payload: { percent },\n  }),\n\n  setVolume: volume => ({\n    type: Types.SET_VOLUME,\n    payload: { volume },\n  }),\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}